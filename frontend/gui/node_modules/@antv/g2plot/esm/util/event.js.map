{"version":3,"file":"event.js","sourceRoot":"","sources":["../../src/util/event.ts"],"names":[],"mappings":"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","sourcesContent":["import ViewLayer from '../base/view-layer';\nimport { LooseMap } from '../interface/types';\nimport { each, deepMix, upperFirst } from '@antv/util';\n\ntype IEventmap = LooseMap<string>;\n\ntype Handler = (...__: any[]) => {};\n\nconst eventNames = [\n  'click',\n  'dblclick',\n  'mousemove',\n  'mouseenter',\n  'mouseleave',\n  'mousedown',\n  'mouseup',\n  'contextmenu',\n];\n\nconst mobileEventNames = [\n  /*'touchstart',\n  'touchmove',\n  'touchend',\n  'pressstart',\n  'press',\n  'pressend',\n  'swipestart',\n  'swipe',\n  'swipeend',\n  'pinchstart',\n  'pinch',\n  'pinchend',\n  'panstart',\n  'pan',\n  'panend',*/\n];\n\nconst viewComponentMap = {\n  axis: 'axis-label',\n  label: 'label',\n  legend: 'legend-item',\n};\n\nconst canvasComponentMap = {\n  title: 'title',\n  description: 'description',\n  breadcrumb: 'breadcrumb',\n};\n\nconst CANVAS_EVENT_MAP: IEventmap = deepMix(getEventMap(canvasComponentMap), getRegionEventMap('Plot', eventNames));\n\nconst LAYER_EVENT_MAP: IEventmap = getRegionEventMap('Layer', eventNames);\n\n//移动端事件暂时只支持view级\nconst EVENT_MAP: IEventmap = deepMix(\n  {},\n  getEventMap(viewComponentMap),\n  getRegionEventMap('View', eventNames),\n  getMobileEventMap()\n);\n\nfunction onEvent(layer: ViewLayer, eventName: string, handler: Handler) {\n  layer.view.on(eventName, (ev?: any) => {\n    const eventData = {\n      x: ev?.x,\n      y: ev?.y,\n      clientX: ev?.clientX,\n      clientY: ev?.clientY,\n      target: ev?.target,\n      data: ev?.data ? ev.data.data : null,\n      plot: layer,\n      canvas: layer.canvas,\n      gEvent: ev?.gEvent,\n    };\n    handler(eventData);\n  });\n}\n\nexport function getEventMap(map) {\n  const eventMap: IEventmap = {};\n  each(map, (item, key) => {\n    const componentName = upperFirst(key);\n    const namePrefix = `on${componentName}`;\n    const eventPrefix = `${item}:`;\n    each(eventNames, (name) => {\n      const eventName = upperFirst(name);\n      const eventKey = `${namePrefix}${eventName}`;\n      const event = `${eventPrefix}${name}`;\n      eventMap[eventKey] = event;\n    });\n  });\n  return eventMap;\n}\n\nexport function getRegionEventMap(prefix, eventList) {\n  const eventMap: IEventmap = {};\n  const namePrefix = `on`;\n  each(eventList, (name) => {\n    const eventName = upperFirst(name);\n    const eventKey = `${namePrefix}${prefix}${eventName}`;\n    eventMap[eventKey] = name;\n  });\n  return eventMap;\n}\n\nexport function getMobileEventMap() {\n  const eventMap: IEventmap = {};\n  const namePrefix = `on`;\n  each(mobileEventNames, (name) => {\n    const eventName = upperFirst(name);\n    const eventKey = `${namePrefix}${eventName}`;\n    eventMap[eventKey] = name;\n  });\n  return eventMap;\n}\n\nexport { IEventmap, EVENT_MAP, CANVAS_EVENT_MAP, LAYER_EVENT_MAP, onEvent };\n"]}
{"version":3,"file":"animation.js","sourceRoot":"","sources":["../../../src/plots/range-bar/animation.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,iBAAiB,EAAU,MAAM,kBAAkB,CAAC;AAC7D,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,YAAY,CAAC;AAEzC,UAAU;AACV,IAAI,UAAoB,CAAC;AAEzB,SAAS,gBAAgB,CAAC,KAAK,EAAE,UAAU;IACzC,IAAM,IAAI,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;IAC7B,IAAM,OAAO,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;IAC3C,KAAK,CAAC,OAAO,CAAC;QACZ,IAAI,EAAE,MAAM;QACZ,KAAK,EAAE;YACL,CAAC,EAAE,OAAO;YACV,CAAC,EAAE,IAAI,CAAC,IAAI;YACZ,KAAK,EAAE,CAAC;YACR,MAAM,EAAE,IAAI,CAAC,MAAM;SACpB;KACF,CAAC,CAAC;IACH,IAAM,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IACtC,MAAM,CAAC,OAAO,CACZ;QACE,KAAK,EAAE,IAAI,CAAC,KAAK;QACjB,CAAC,EAAE,IAAI,CAAC,IAAI;KACb,EACD,UAAU,CAAC,QAAQ,EACnB,UAAU,CAAC,MAAM,EACjB;QACE,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACtB,CAAC,EACD,UAAU,CAAC,KAAK,CACjB,CAAC;AACJ,CAAC;AAED,gBAAgB,CAAC,aAAa,GAAG,kBAAkB,CAAC;AAEpD,MAAM,UAAU,aAAa,CAAC,MAAM;IAClC,UAAU,GAAG,MAAM,CAAC;AACtB,CAAC;AAED,SAAS,gBAAgB,CAAC,KAAK,EAAE,UAAU;IACzC,IAAM,QAAQ,GAAG,iBAAiB,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IACvD,IAAM,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;IACzC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;IAC7B,KAAK,CAAC,OAAO,CACX;QACE,IAAI,EAAE,MAAM;KACb,EACD,UAAU,CAAC,QAAQ,EACnB,UAAU,CAAC,MAAM,EACjB,UAAU,CAAC,QAAQ,EACnB,GAAG,CACJ,CAAC;AACJ,CAAC;AAED,SAAS,iBAAiB,CAAC,KAAK;IACtB,IAAA,aAAE,CAAW;IACrB,IAAI,MAAM,CAAC;IACX,IAAI,CAAC,UAAU,EAAE,UAAC,CAAC;QACjB,IAAI,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE;YACf,MAAM,GAAG,CAAC,CAAC;SACZ;IACH,CAAC,CAAC,CAAC;IACH,OAAO,MAAM,CAAC;AAChB,CAAC;AAED,gBAAgB,CAAC,aAAa,GAAG,kBAAkB,CAAC;AAEpD,iBAAiB,CAAC,kBAAkB,EAAE,gBAAgB,CAAC,CAAC;AACxD,iBAAiB,CAAC,kBAAkB,EAAE,gBAAgB,CAAC,CAAC","sourcesContent":["import { registerAnimation, IShape } from '../../dependents';\nimport { clone, each } from '@antv/util';\n\n// 记录之前的状态\nlet shapeCache: IShape[];\n\nfunction clipInFromCenter(shape, animateCfg) {\n  const bbox = shape.getBBox();\n  const centerX = bbox.minX + bbox.width / 2;\n  shape.setClip({\n    type: 'rect',\n    attrs: {\n      x: centerX,\n      y: bbox.minY,\n      width: 0,\n      height: bbox.height,\n    },\n  });\n  const cliper = shape.get('clipShape');\n  cliper.animate(\n    {\n      width: bbox.width,\n      x: bbox.minX,\n    },\n    animateCfg.duration,\n    animateCfg.easing,\n    () => {\n      shape.setClip(null);\n    },\n    animateCfg.delay\n  );\n}\n\nclipInFromCenter.animationName = 'clipInFromCenter';\n\nexport function setShapeCache(shapes) {\n  shapeCache = shapes;\n}\n\nfunction updateFromCenter(shape, animateCfg) {\n  const fromPath = getShapeFromCache(shape).attr('path');\n  const toPath = clone(shape.attr('path'));\n  shape.attr('path', fromPath);\n  shape.animate(\n    {\n      path: toPath,\n    },\n    animateCfg.duration,\n    animateCfg.easing,\n    animateCfg.callback,\n    100\n  );\n}\n\nfunction getShapeFromCache(shape) {\n  const { id } = shape;\n  let target;\n  each(shapeCache, (s) => {\n    if (s.id === id) {\n      target = s;\n    }\n  });\n  return target;\n}\n\nupdateFromCenter.animationName = 'updateFromCenter';\n\nregisterAnimation('clipInFromCenter', clipInFromCenter);\nregisterAnimation('updateFromCenter', updateFromCenter);\n"]}
{"version":3,"file":"wordcloud2.js","sourceRoot":"","sources":["../../../src/plots/word-cloud/wordcloud2.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Create By Bruce Too\n * On 2020-02-14\n */\n/* eslint-disable unicorn/no-abusive-eslint-disable */\n/* eslint-disable */\n// @ts-nocheck\n\n// TODO rewrite with typescript @brucetoo\n\n/*!\n * wordcloud2.js\n * http://timdream.org/wordcloud2.js/\n *\n * Copyright 2011 - 2013 Tim Chien\n * Released under the MIT license\n */\n\n'use strict';\n\n// setImmediate\nif (!window.setImmediate) {\n  window.setImmediate = (function setupSetImmediate() {\n    return (\n      window.msSetImmediate ||\n      window.webkitSetImmediate ||\n      window.mozSetImmediate ||\n      window.oSetImmediate ||\n      (function setupSetZeroTimeout() {\n        if (!window.postMessage || !window.addEventListener) {\n          return null;\n        }\n\n        var callbacks = [undefined];\n        var message = 'zero-timeout-message';\n\n        // Like setTimeout, but only takes a function argument.  There's\n        // no time argument (always zero) and no arguments (you have to\n        // use a closure).\n        var setZeroTimeout = function setZeroTimeout(callback) {\n          var id = callbacks.length;\n          callbacks.push(callback);\n          window.postMessage(message + id.toString(36), '*');\n\n          return id;\n        };\n\n        window.addEventListener(\n          'message',\n          function setZeroTimeoutMessage(evt) {\n            // Skipping checking event source, retarded IE confused this window\n            // object with another in the presence of iframe\n            if (\n              typeof evt.data !== 'string' ||\n              evt.data.substr(0, message.length) !== message /* ||\n            evt.source !== window */\n            ) {\n              return;\n            }\n\n            evt.stopImmediatePropagation();\n\n            var id = parseInt(evt.data.substr(message.length), 36);\n            if (!callbacks[id]) {\n              return;\n            }\n\n            callbacks[id]();\n            callbacks[id] = undefined;\n          },\n          true\n        );\n\n        /* specify clearImmediate() here since we need the scope */\n        window.clearImmediate = function clearZeroTimeout(id) {\n          if (!callbacks[id]) {\n            return;\n          }\n\n          callbacks[id] = undefined;\n        };\n\n        return setZeroTimeout;\n      })() ||\n      // fallback\n      function setImmediateFallback(fn) {\n        window.setTimeout(fn, 0);\n      }\n    );\n  })();\n}\n\nif (!window.clearImmediate) {\n  window.clearImmediate = (function setupClearImmediate() {\n    return (\n      window.msClearImmediate ||\n      window.webkitClearImmediate ||\n      window.mozClearImmediate ||\n      window.oClearImmediate ||\n      // \"clearZeroTimeout\" is implement on the previous block ||\n      // fallback\n      function clearImmediateFallback(timer) {\n        window.clearTimeout(timer);\n      }\n    );\n  })();\n}\n\n// Check if WordCloud can run on this browser\nvar isSupported = (function isSupported() {\n  var canvas = document.createElement('canvas');\n  if (!canvas || !canvas.getContext) {\n    return false;\n  }\n\n  var ctx = canvas.getContext('2d');\n  if (!ctx.getImageData) {\n    return false;\n  }\n  if (!ctx.fillText) {\n    return false;\n  }\n\n  if (!Array.prototype.some) {\n    return false;\n  }\n  if (!Array.prototype.push) {\n    return false;\n  }\n\n  return true;\n})();\n\n// Find out if the browser impose minium font size by\n// drawing small texts on a canvas and measure it's width.\nvar minFontSize = (function getMinFontSize() {\n  if (!isSupported) {\n    return;\n  }\n\n  var ctx = document.createElement('canvas').getContext('2d');\n\n  // start from 20\n  var size = 20;\n\n  // two sizes to measure\n  var hanWidth, mWidth;\n\n  while (size) {\n    ctx.font = size.toString(10) + 'px sans-serif';\n    if (ctx.measureText('\\uFF37').width === hanWidth && ctx.measureText('m').width === mWidth) {\n      return size + 1;\n    }\n\n    hanWidth = ctx.measureText('\\uFF37').width;\n    mWidth = ctx.measureText('m').width;\n\n    size--;\n  }\n\n  return 0;\n})();\n\n// Based on http://jsfromhell.com/array/shuffle\nvar shuffleArray = function shuffleArray(arr) {\n  for (var j, x, i = arr.length; i; j = Math.floor(Math.random() * i), x = arr[--i], arr[i] = arr[j], arr[j] = x) {}\n  return arr;\n};\n\nvar WordCloud = function WordCloud(elements, options) {\n  if (!isSupported) {\n    return;\n  }\n\n  if (!Array.isArray(elements)) {\n    elements = [elements];\n  }\n\n  elements.forEach(function (el, i) {\n    if (typeof el === 'string') {\n      elements[i] = document.getElementById(el);\n      if (!elements[i]) {\n        throw 'The element id specified is not found.';\n      }\n    } else if (!el.tagName && !el.appendChild) {\n      throw 'You must pass valid HTML elements, or ID of the element.';\n    }\n  });\n\n  /* Default values to be overwritten by options object */\n  var settings = {\n    data: [],\n    fontFamily: '\"Trebuchet MS\", \"Heiti TC\", \"微軟正黑體\", ' + '\"Arial Unicode MS\", \"Droid Fallback Sans\", sans-serif',\n    fontWeight: 'normal',\n    color: 'random-dark',\n    animatable: true,\n\n    minFontSize: minFontSize, // browser's min font size default\n    maxFontSize: 60, // max font size default is 60\n\n    clearCanvas: true,\n    backgroundColor: '#fff', // opaque white = rgba(255, 255, 255, 1)\n\n    gridSize: 8,\n    drawOutOfBound: false,\n    origin: null,\n\n    drawMask: false,\n    maskColor: 'rgba(255,0,0,0.3)',\n    maskGapWidth: 0.3,\n\n    wait: 0,\n    abortThreshold: 0, // disabled\n    abort: function noop() {},\n\n    minRotation: -Math.PI / 2,\n    maxRotation: Math.PI / 2,\n    rotateRatio: 0.5,\n    rotationSteps: 1,\n\n    shuffle: true,\n\n    shape: 'circle',\n    ellipticity: 1,\n\n    active: true,\n    selected: -1,\n    shadowColor: '#333',\n    shadowBlur: 10,\n\n    classes: null,\n\n    onWordCloudHover: null,\n    onWordCloudClick: null,\n  };\n\n  const interactionItems = [];\n\n  if (options) {\n    for (var key in options) {\n      if (key === 'wordStyle') {\n        for (let fontKey in options[key]) {\n          if (fontKey in settings) {\n            settings[fontKey] = options[key][fontKey];\n          }\n        }\n      } else {\n        if (key in settings) {\n          settings[key] = options[key];\n        }\n      }\n    }\n  }\n\n  if (settings.minFontSize < minFontSize) {\n    // can't less than browse's min font size\n    settings.minFontSize = minFontSize;\n  }\n\n  if (settings.minFontSize > settings.maxFontSize) {\n    console.error('minSize cant bigger than maxSize');\n    return;\n  }\n\n  let maxWeight = 0;\n  for (let i = 0; i < settings.data.length; i++) {\n    if (maxWeight < settings.data[i].weight) {\n      maxWeight = settings.data[i].weight;\n    }\n  }\n\n  var getRealFontSize = function getRealFontSize(weight) {\n    return Math.min(Math.max(settings.minFontSize, (settings.maxFontSize * weight) / maxWeight), settings.maxFontSize);\n  };\n\n  var isCardioid = false;\n  /* Convert shape into a function */\n  if (typeof settings.shape !== 'function') {\n    switch (settings.shape) {\n      case 'circle':\n      /* falls through */\n      default:\n        // 'circle' is the default and a shortcut in the code loop.\n        settings.shape = 'circle';\n        break;\n\n      case 'cardioid':\n        // https://baike.baidu.com/item/%E5%BF%83%E8%84%8F%E7%BA%BF/10323843?fromtitle=%E5%BF%83%E5%BD%A2%E7%BA%BF&fromid=10018818\n        settings.shape = function shapeCardioid(theta) {\n          return 1 - Math.sin(theta);\n        };\n        isCardioid = true;\n        break;\n\n      /*\n      To work out an X-gon, one has to calculate \"m\",\n      where 1/(cos(2*PI/X)+m*sin(2*PI/X)) = 1/(cos(0)+m*sin(0))\n      http://www.wolframalpha.com/input/?i=1%2F%28cos%282*PI%2FX%29%2Bm*sin%28\n      2*PI%2FX%29%29+%3D+1%2F%28cos%280%29%2Bm*sin%280%29%29\n      Copy the solution into polar equation r = 1/(cos(t') + m*sin(t'))\n      where t' equals to mod(t, 2PI/X);\n      */\n\n      case 'diamond':\n        settings.shape = function shapeSquare(theta) {\n          const thetaPrime = theta % ((2 * Math.PI) / 4);\n          return 1 / (Math.cos(thetaPrime) + Math.sin(thetaPrime));\n        };\n        break;\n      case 'square':\n        // http://www.wolframalpha.com/input/?i=plot+r+%3D+1%2F%28cos%28mod+\n        // %28t%2C+PI%2F2%29%29%2Bsin%28mod+%28t%2C+PI%2F2%29%29%29%2C+t+%3D\n        // +0+..+2*PI\n        settings.shape = function shapeSquare(theta) {\n          const thetaPrime = (theta + Math.PI / 4) % ((2 * Math.PI) / 4);\n          return 1 / (Math.cos(thetaPrime) + Math.sin(thetaPrime));\n        };\n        break;\n\n      case 'triangle-forward':\n        // http://www.wolframalpha.com/input/?i=plot+r+%3D+1%2F%28cos%28mod+\n        // %28t%2C+2*PI%2F3%29%29%2Bsqrt%283%29sin%28mod+%28t%2C+2*PI%2F3%29\n        // %29%29%2C+t+%3D+0+..+2*PI\n        settings.shape = function shapeTriangle(theta) {\n          const thetaPrime = theta % ((2 * Math.PI) / 3);\n          return 1 / (Math.cos(thetaPrime) + Math.sqrt(3) * Math.sin(thetaPrime));\n        };\n        break;\n\n      case 'triangle-backward':\n        settings.shape = function shapeTriangle(theta) {\n          const thetaPrime = (theta + Math.PI) % ((2 * Math.PI) / 3);\n          return 1 / (Math.cos(thetaPrime) + Math.sqrt(3) * Math.sin(thetaPrime));\n        };\n        break;\n\n      case 'triangle':\n      case 'triangle-up':\n        settings.shape = function shapeTriangle(theta) {\n          const thetaPrime = (theta + (Math.PI * 3) / 2) % ((2 * Math.PI) / 3);\n          return 1 / (Math.cos(thetaPrime) + Math.sqrt(3) * Math.sin(thetaPrime));\n        };\n        break;\n      case 'triangle-down':\n        settings.shape = function shapeTriangle(theta) {\n          const thetaPrime = (theta + (Math.PI * 5) / 2) % ((2 * Math.PI) / 3);\n          return 1 / (Math.cos(thetaPrime) + Math.sqrt(3) * Math.sin(thetaPrime));\n        };\n        break;\n\n      case 'pentagon':\n        settings.shape = function shapePentagon(theta) {\n          const thetaPrime = (theta + 0.955) % ((2 * Math.PI) / 5);\n          return 1 / (Math.cos(thetaPrime) + 0.726543 * Math.sin(thetaPrime));\n        };\n        break;\n\n      case 'star':\n        settings.shape = function shapeStar(theta) {\n          const thetaPrime = (theta + 0.955) % ((2 * Math.PI) / 10);\n          if (((theta + 0.955) % ((2 * Math.PI) / 5)) - (2 * Math.PI) / 10 >= 0) {\n            return (\n              1 / (Math.cos((2 * Math.PI) / 10 - thetaPrime) + 3.07768 * Math.sin((2 * Math.PI) / 10 - thetaPrime))\n            );\n          } else {\n            return 1 / (Math.cos(thetaPrime) + 3.07768 * Math.sin(thetaPrime));\n          }\n        };\n        break;\n    }\n  }\n\n  /* Make sure gridSize is a whole number and is not smaller than 4px */\n  settings.gridSize = Math.max(Math.floor(settings.gridSize), 4);\n\n  /* shorthand */\n  var g = settings.gridSize;\n  var maskRectWidth = g - settings.maskGapWidth;\n\n  /* normalize rotation settings */\n  var rotationRange = Math.abs(settings.maxRotation - settings.minRotation);\n  var minRotation = Math.min(settings.maxRotation, settings.minRotation);\n  var rotationSteps = settings.rotationSteps;\n\n  /* information/object available to all functions, set when start() */\n  var grid, // 2d array containing filling information\n    ngx,\n    ngy, // width and height of the grid\n    center, // position of the center of the cloud\n    maxRadius;\n\n  /* timestamp for measuring each putWord() action */\n  var escapeTime;\n\n  /* function for getting the color of the text */\n  var getTextColor;\n  function random_hsl_color(min, max) {\n    return (\n      'hsl(' +\n      (Math.random() * 360).toFixed() +\n      ',' +\n      (Math.random() * 30 + 70).toFixed() +\n      '%,' +\n      (Math.random() * (max - min) + min).toFixed() +\n      '%)'\n    );\n  }\n  switch (settings.color) {\n    case 'random-dark':\n      getTextColor = function getRandomDarkColor() {\n        return random_hsl_color(10, 50);\n      };\n      break;\n\n    case 'random-light':\n      getTextColor = function getRandomLightColor() {\n        return random_hsl_color(50, 90);\n      };\n      break;\n\n    default:\n      if (typeof settings.color === 'function') {\n        getTextColor = settings.color;\n      }\n      break;\n  }\n\n  /* function for getting the classes of the text */\n  var getTextClasses = null;\n  if (typeof settings.classes === 'function') {\n    getTextClasses = settings.classes;\n  }\n\n  /* Interactive */\n  var interactive = false;\n  var infoGrid = [];\n  var hovered;\n\n  var getInfoGridFromMouseTouchEvent = function getInfoGridFromMouseTouchEvent(evt) {\n    var canvas = evt.currentTarget;\n    var rect = canvas.getBoundingClientRect();\n    var clientX;\n    var clientY;\n    /** Detect if touches are available */\n    if (evt.touches) {\n      clientX = evt.touches[0].clientX;\n      clientY = evt.touches[0].clientY;\n    } else {\n      clientX = evt.clientX;\n      clientY = evt.clientY;\n    }\n    var eventX = clientX - rect.left;\n    var eventY = clientY - rect.top;\n\n    var x = Math.floor((eventX * (canvas.width / rect.width || 1)) / g);\n    var y = Math.floor((eventY * (canvas.height / rect.height || 1)) / g);\n\n    return infoGrid && infoGrid[x] && infoGrid[x][y];\n  };\n\n  var defaultHoverAction = function defaultHoverAction(item, dimension, evt, start) {\n    if (item) {\n      start(item.id);\n    } else {\n      start(-1);\n    }\n  };\n\n  var wordcloudhover = function wordcloudhover(evt) {\n    var info = getInfoGridFromMouseTouchEvent(evt);\n\n    if (hovered === info) {\n      return;\n    }\n\n    if (!info) {\n      settings.onWordCloudHover(undefined, undefined, evt, start);\n      if (settings.active) {\n        defaultHoverAction(undefined, undefined, evt, start);\n      }\n      return;\n    }\n\n    settings.onWordCloudHover(info.item, info.dimension, evt, start);\n    if (settings.active) {\n      defaultHoverAction(info.item, info.dimension, evt, start);\n    }\n    hovered = info;\n  };\n\n  var wordcloudclick = function wordcloudclick(evt) {\n    var info = getInfoGridFromMouseTouchEvent(evt);\n    if (!info) {\n      return;\n    }\n\n    settings.onWordCloudClick(info.item, info.dimension, evt);\n    evt.preventDefault();\n  };\n\n  /* Get points on the grid for a given radius away from the center */\n  var pointsAtRadius = [];\n  var getPointsAtRadius = function getPointsAtRadius(radius) {\n    if (pointsAtRadius[radius]) {\n      return pointsAtRadius[radius];\n    }\n\n    // Look for these number of points on each radius\n    var T = radius * 8;\n\n    // Getting all the points at this radius\n    var t = T;\n    var points = [];\n\n    if (radius === 0) {\n      points.push([center[0], center[1], 0]);\n    }\n\n    while (t--) {\n      // distort the radius to put the cloud in shape\n      var rx = 1;\n      if (settings.shape !== 'circle') {\n        rx = settings.shape((t / T) * 2 * Math.PI); // 0 to 1\n      }\n\n      // Push [x, y, t]; t is used solely for getTextColor()\n      points.push([\n        center[0] + radius * rx * Math.cos((-t / T) * 2 * Math.PI),\n        center[1] + radius * rx * Math.sin((-t / T) * 2 * Math.PI) * settings.ellipticity,\n        (t / T) * 2 * Math.PI,\n      ]);\n    }\n\n    pointsAtRadius[radius] = points;\n    return points;\n  };\n\n  /* Return true if we had spent too much time */\n  var exceedTime = function exceedTime() {\n    return settings.abortThreshold > 0 && new Date().getTime() - escapeTime > settings.abortThreshold;\n  };\n\n  /* Get the deg of rotation according to settings, and luck. */\n  var getRotateDeg = function getRotateDeg() {\n    if (settings.rotateRatio === 0) {\n      return 0;\n    }\n\n    if (Math.random() > settings.rotateRatio) {\n      return 0;\n    }\n\n    if (rotationRange === 0) {\n      return minRotation;\n    }\n\n    // return minRotation + Math.round(Math.random() * rotationRange / rotationSteps) * rotationSteps;\n\n    if (rotationSteps > 0) {\n      // Min rotation + zero or more steps * span of one step\n      return minRotation + (Math.floor(Math.random() * rotationSteps) * rotationRange) / rotationSteps;\n    } else {\n      return minRotation + Math.random() * rotationRange;\n    }\n  };\n\n  var getTextInfo = function getTextInfo(word, weight, rotateDeg) {\n    // calculate the acutal font size\n    // fontSize === 0 means wants the text skipped,\n    // and size < minSize means we cannot draw the text\n    var debug = false;\n    var fontSize = getRealFontSize(weight);\n    if (fontSize <= 0) {\n      return false;\n    }\n\n    // Scale factor here is to make sure fillText is not limited by\n    // the minium font size set by browser.\n    // It will always be 1 or 2n.\n    var mu = 1;\n    if (fontSize < minFontSize) {\n      mu = (function calculateScaleFactor() {\n        var mu = 2;\n        while (mu * fontSize < minFontSize) {\n          mu += 2;\n        }\n        return mu;\n      })();\n    }\n\n    var fcanvas = document.createElement('canvas');\n    var fctx = fcanvas.getContext('2d', { willReadFrequently: true });\n\n    fctx.font = settings.fontWeight + ' ' + (fontSize * mu).toString(10) + 'px ' + settings.fontFamily;\n\n    // Estimate the dimension of the text with measureText().\n    var fw = fctx.measureText(word).width / mu;\n    var fh = Math.max(fontSize * mu, fctx.measureText('m').width, fctx.measureText('\\uFF37').width) / mu;\n\n    // Create a boundary box that is larger than our estimates,\n    // so text don't get cut of (it sill might)\n    var boxWidth = fw + fh * 2;\n    var boxHeight = fh * 3;\n    var fgw = Math.ceil(boxWidth / g);\n    var fgh = Math.ceil(boxHeight / g);\n    boxWidth = fgw * g;\n    boxHeight = fgh * g;\n\n    // Calculate the proper offsets to make the text centered at\n    // the preferred position.\n\n    // This is simply half of the width.\n    var fillTextOffsetX = -fw / 2;\n    // Instead of moving the box to the exact middle of the preferred\n    // position, for Y-offset we move 0.4 instead, so Latin alphabets look\n    // vertical centered.\n    var fillTextOffsetY = -fh * 0.4;\n\n    // Calculate the actual dimension of the canvas, considering the rotation.\n    var cgh = Math.ceil((boxWidth * Math.abs(Math.sin(rotateDeg)) + boxHeight * Math.abs(Math.cos(rotateDeg))) / g);\n    var cgw = Math.ceil((boxWidth * Math.abs(Math.cos(rotateDeg)) + boxHeight * Math.abs(Math.sin(rotateDeg))) / g);\n    var width = cgw * g;\n    var height = cgh * g;\n\n    fcanvas.setAttribute('width', width);\n    fcanvas.setAttribute('height', height);\n\n    if (debug) {\n      // Attach fcanvas to the DOM\n      document.body.appendChild(fcanvas);\n      // Save it's state so that we could restore and draw the grid correctly.\n      fctx.save();\n    }\n\n    // Scale the canvas with |mu|.\n    fctx.scale(1 / mu, 1 / mu);\n    fctx.translate((width * mu) / 2, (height * mu) / 2);\n    fctx.rotate(-rotateDeg);\n\n    // Once the width/height is set, ctx info will be reset.\n    // Set it again here.\n    fctx.font = settings.fontWeight + ' ' + (fontSize * mu).toString(10) + 'px ' + settings.fontFamily;\n\n    // Fill the text into the fcanvas.\n    // XXX: We cannot because textBaseline = 'top' here because\n    // Firefox and Chrome uses different default line-height for canvas.\n    // Please read https://bugzil.la/737852#c6.\n    // Here, we use textBaseline = 'middle' and draw the text at exactly\n    // 0.5 * fontSize lower.\n    fctx.fillStyle = '#000';\n    fctx.textBaseline = 'middle';\n    fctx.fillText(word, fillTextOffsetX * mu, (fillTextOffsetY + fontSize * 0.5) * mu);\n\n    // Get the pixels of the text\n    var imageData;\n    try {\n      imageData = fctx.getImageData(0, 0, width, height).data;\n    } catch (e) {\n      // data not long type\n      return false;\n    }\n\n    if (exceedTime()) {\n      return false;\n    }\n\n    if (debug) {\n      // Draw the box of the original estimation\n      fctx.strokeRect(fillTextOffsetX * mu, fillTextOffsetY, fw * mu, fh * mu);\n      fctx.restore();\n    }\n\n    // Read the pixels and save the information to the occupied array\n    var occupied = [];\n    var gx = cgw,\n      gy,\n      x,\n      y;\n    var bounds = [cgh / 2, cgw / 2, cgh / 2, cgw / 2];\n    while (gx--) {\n      gy = cgh;\n      while (gy--) {\n        y = g;\n        singleGridLoop: {\n          while (y--) {\n            x = g;\n            while (x--) {\n              if (imageData[((gy * g + y) * width + (gx * g + x)) * 4 + 3]) {\n                occupied.push([gx, gy]);\n\n                if (gx < bounds[3]) {\n                  bounds[3] = gx;\n                }\n                if (gx > bounds[1]) {\n                  bounds[1] = gx;\n                }\n                if (gy < bounds[0]) {\n                  bounds[0] = gy;\n                }\n                if (gy > bounds[2]) {\n                  bounds[2] = gy;\n                }\n\n                if (debug) {\n                  fctx.fillStyle = 'rgba(255, 0, 0, 0.5)';\n                  fctx.fillRect(gx * g, gy * g, g - 0.5, g - 0.5);\n                }\n                break singleGridLoop;\n              }\n            }\n          }\n          if (debug) {\n            fctx.fillStyle = 'rgba(0, 0, 255, 0.5)';\n            fctx.fillRect(gx * g, gy * g, g - 0.5, g - 0.5);\n          }\n        }\n      }\n    }\n\n    if (debug) {\n      // real bounds\n      fctx.fillStyle = 'rgba(0, 255, 0, 0.5)';\n      fctx.fillRect(bounds[3] * g, bounds[0] * g, (bounds[1] - bounds[3] + 1) * g, (bounds[2] - bounds[0] + 1) * g);\n    }\n\n    // Return information needed to create the text on the real canvas\n    return {\n      mu: mu,\n      occupied: occupied,\n      bounds: bounds,\n      gw: cgw,\n      gh: cgh,\n      fillTextOffsetX: fillTextOffsetX,\n      fillTextOffsetY: fillTextOffsetY,\n      fillTextWidth: fw,\n      fillTextHeight: fh,\n      fontSize: fontSize,\n    };\n  };\n\n  /* Determine if there is room available in the given dimension */\n  var canFitText = function canFitText(gx, gy, gw, gh, occupied) {\n    // Go through the occupied points,\n    // return false if the space is not available.\n    var i = occupied.length;\n    while (i--) {\n      var px = gx + occupied[i][0];\n      var py = gy + occupied[i][1];\n\n      if (px >= ngx || py >= ngy || px < 0 || py < 0) {\n        if (!settings.drawOutOfBound) {\n          return false;\n        }\n        continue;\n      }\n\n      if (!grid[px][py]) {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  /* Actually draw the text on the grid */\n  var drawText = function drawText(gx, gy, info, word, weight, distance, theta, rotateDeg, attributes, id, refresh) {\n    var fontSize = info.fontSize;\n    var color = settings.color;\n    var classes = settings.classes;\n    if (!refresh) {\n      if (getTextColor) {\n        color = getTextColor(word, weight, fontSize, distance, theta);\n      } else {\n        color = settings.color;\n      }\n\n      if (getTextClasses) {\n        classes = getTextClasses(word, weight, fontSize, distance, theta);\n      } else {\n        classes = settings.classes;\n      }\n    } else {\n      const find = getInteractionItemById(id);\n      color = find ? find.color : settings.color;\n    }\n\n    var dimension;\n    var bounds = info.bounds;\n    dimension = {\n      x: (gx + bounds[3]) * g,\n      y: (gy + bounds[0]) * g,\n      w: (bounds[1] - bounds[3] + 1) * g,\n      h: (bounds[2] - bounds[0] + 1) * g,\n    };\n\n    elements.forEach(function (el) {\n      if (el.getContext) {\n        var ctx = el.getContext('2d');\n        var mu = info.mu;\n\n        // Save the current state before messing it\n        ctx.save();\n        const font = settings.fontWeight + ' ' + (fontSize * mu).toString(10) + 'px ' + settings.fontFamily;\n        ctx.scale(1 / mu, 1 / mu);\n\n        ctx.font = font;\n        ctx.fillStyle = color;\n\n        // Translate the canvas position to the origin coordinate of where\n        // the text should be put.\n        let transX = (gx + info.gw / 2) * g * mu;\n        let transY = (gy + info.gh / 2) * g * mu;\n        ctx.translate(transX, transY);\n\n        if (rotateDeg !== 0) {\n          ctx.rotate(-rotateDeg);\n        }\n\n        // Finally, fill the text.\n\n        // XXX: We cannot because textBaseline = 'top' here because\n        // Firefox and Chrome uses different default line-height for canvas.\n        // Please read https://bugzil.la/737852#c6.\n        // Here, we use textBaseline = 'middle' and draw the text at exactly\n        // 0.5 * fontSize lower.\n        ctx.textBaseline = 'middle';\n        if (settings.selected === id) {\n          ctx.shadowColor = settings.shadowColor;\n          ctx.shadowBlur = settings.shadowBlur;\n        }\n        ctx.fillText(word, info.fillTextOffsetX * mu, (info.fillTextOffsetY + fontSize * 0.5) * mu);\n\n        // The below box is always matches how <span>s are positioned\n        // ctx.strokeRect(info.fillTextOffsetX, info.fillTextOffsetY,\n        //   info.fillTextWidth, info.fillTextHeight);\n\n        if (!refresh) {\n          interactionItems.push({\n            gx: gx,\n            gy: gy,\n            info: info,\n            word: word,\n            weight: weight,\n            distance: distance,\n            theta: theta,\n            rotateDeg: rotateDeg,\n            attributes: attributes,\n            id: id,\n            color: color,\n          });\n        }\n        // Restore the state.\n        ctx.restore();\n      } else {\n        // drawText on DIV element\n        var span = document.createElement('span');\n        var transformRule = '';\n        transformRule = 'rotate(' + (-rotateDeg / Math.PI) * 180 + 'deg) ';\n        if (info.mu !== 1) {\n          transformRule += 'translateX(-' + info.fillTextWidth / 4 + 'px) ' + 'scale(' + 1 / info.mu + ')';\n        }\n        var styleRules = {\n          position: 'absolute',\n          display: 'block',\n          font: settings.fontWeight + ' ' + fontSize * info.mu + 'px ' + settings.fontFamily,\n          left: (gx + info.gw / 2) * g + info.fillTextOffsetX + 'px',\n          top: (gy + info.gh / 2) * g + info.fillTextOffsetY + 'px',\n          width: info.fillTextWidth + 'px',\n          height: info.fillTextHeight + 'px',\n          lineHeight: fontSize + 'px',\n          whiteSpace: 'nowrap',\n          transform: transformRule,\n          webkitTransform: transformRule,\n          msTransform: transformRule,\n          transformOrigin: '50% 40%',\n          webkitTransformOrigin: '50% 40%',\n          msTransformOrigin: '50% 40%',\n        };\n        if (color) {\n          styleRules.color = color;\n        }\n        span.textContent = word;\n        for (var cssProp in styleRules) {\n          span.style[cssProp] = styleRules[cssProp];\n        }\n        if (attributes) {\n          for (var attribute in attributes) {\n            span.setAttribute(attribute, attributes[attribute]);\n          }\n        }\n        if (classes) {\n          span.className += classes;\n        }\n        el.appendChild(span);\n      }\n    });\n  };\n\n  /* Help function to updateGrid */\n  var fillGridAt = function fillGridAt(x, y, drawMask, dimension, item) {\n    if (x >= ngx || y >= ngy || x < 0 || y < 0) {\n      return;\n    }\n\n    grid[x][y] = false;\n\n    if (drawMask) {\n      var ctx = elements[0].getContext('2d');\n      ctx.fillRect(x * g, y * g, maskRectWidth, maskRectWidth);\n    }\n\n    if (interactive) {\n      infoGrid[x][y] = { item: item, dimension: dimension };\n    }\n  };\n\n  /* Update the filling information of the given space with occupied points.\n     Draw the mask on the canvas if necessary. */\n  var updateGrid = function updateGrid(gx, gy, gw, gh, info) {\n    var occupied = info.occupied;\n    var drawMask = settings.drawMask;\n    var ctx;\n    if (drawMask) {\n      ctx = elements[0].getContext('2d');\n      ctx.save();\n      ctx.fillStyle = settings.maskColor;\n    }\n\n    var dimension;\n    if (interactive) {\n      var bounds = info.bounds;\n      dimension = {\n        x: (gx + bounds[3]) * g,\n        y: (gy + bounds[0]) * g,\n        w: (bounds[1] - bounds[3] + 1) * g,\n        h: (bounds[2] - bounds[0] + 1) * g,\n      };\n    }\n\n    var i = occupied.length;\n    while (i--) {\n      var px = gx + occupied[i][0];\n      var py = gy + occupied[i][1];\n\n      if (px >= ngx || py >= ngy || px < 0 || py < 0) {\n        continue;\n      }\n\n      // save item's color from info\n      const find = getInteractionItemById(info.item.id);\n      if (find) {\n        info.item.color = find.color;\n      }\n      fillGridAt(px, py, drawMask, dimension, info.item);\n    }\n\n    if (drawMask) {\n      ctx.restore();\n    }\n  };\n\n  var tryToPutWordAtPoint = function tryToPutWordAtPoint(gxy, info, word, weight, distance, rotateDeg, attributes, id) {\n    var gx = Math.floor(gxy[0] - info.gw / 2);\n    var gy = Math.floor(gxy[1] - info.gh / 2);\n    var gw = info.gw;\n    var gh = info.gh;\n\n    // If we cannot fit the text at this position, return false\n    // and go to the next position.\n    if (!canFitText(gx, gy, gw, gh, info.occupied)) {\n      return false;\n    }\n\n    // Actually put the text on the canvas\n    drawText(gx, gy, info, word, weight, distance, gxy[2], rotateDeg, attributes, id, false);\n\n    // Mark the spaces on the grid as filled\n    updateGrid(gx, gy, gw, gh, info);\n\n    return {\n      gx: gx,\n      gy: gy,\n      rot: rotateDeg,\n      info: info,\n    };\n  };\n\n  /* putWord() processes each item on the list,\n     calculate it's size and determine it's position, and actually\n     put it on the canvas. */\n  var putWord = function putWord(item) {\n    var word, weight, attributes, id;\n    if (Array.isArray(item)) {\n      word = item[0];\n      weight = item[1];\n    } else {\n      word = item.word;\n      weight = item.weight;\n      attributes = item.attributes;\n      id = item.id;\n    }\n    var rotateDeg = getRotateDeg();\n\n    // get info needed to put the text onto the canvas\n    var info = getTextInfo(word, weight, rotateDeg);\n    if (info) {\n      info['item'] = item;\n    }\n\n    // not getting the info means we shouldn't be drawing this one.\n    if (!info) {\n      return false;\n    }\n\n    if (exceedTime()) {\n      return false;\n    }\n\n    // If drawOutOfBound is set to false,\n    // skip the loop if we have already know the bounding box of\n    // word is larger than the canvas.\n    if (!settings.drawOutOfBound) {\n      var bounds = info.bounds;\n      if (bounds[1] - bounds[3] + 1 > ngx || bounds[2] - bounds[0] + 1 > ngy) {\n        return false;\n      }\n    }\n\n    // Determine the position to put the text by\n    // start looking for the nearest points\n    var r = maxRadius + 1;\n\n    while (r--) {\n      var points = getPointsAtRadius(maxRadius - r);\n\n      if (settings.shuffle) {\n        points = [].concat(points);\n        shuffleArray(points);\n      }\n\n      // Try to fit the words by looking at each point.\n      // array.some() will stop and return true\n      // when putWordAtPoint() returns true.\n      for (var i = 0; i < points.length; i++) {\n        var res = tryToPutWordAtPoint(points[i], info, word, weight, maxRadius - r, rotateDeg, attributes, id);\n        if (res) {\n          return res;\n        }\n      }\n\n      // var drawn = points.some(tryToPutWordAtPoint);\n      // if (drawn) {\n      //   // leave putWord() and return true\n      //   return true;\n      // }\n    }\n    // we tried all distances but text won't fit, return null\n    return null;\n  };\n\n  /* Send DOM event to all elements. Will stop sending event and return\n     if the previous one is canceled (for cancelable events). */\n  var sendEvent = function sendEvent(type, cancelable, detail) {\n    if (cancelable) {\n      return !elements.some(function (el) {\n        var evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(type, true, cancelable, detail || {});\n        return !el.dispatchEvent(evt);\n      }, this);\n    } else {\n      elements.forEach(function (el) {\n        var evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(type, true, cancelable, detail || {});\n        el.dispatchEvent(evt);\n      }, this);\n    }\n  };\n\n  var getInteractionItemById = function getInteractionItemById(id) {\n    for (let i = 0; i < interactionItems.length; i++) {\n      const find = interactionItems[i];\n      if (interactionItems[i].id === id) {\n        return find;\n      }\n    }\n    return undefined;\n  };\n\n  /* Start drawing on a canvas */\n  var start = function start(selected) {\n    if (selected !== undefined) {\n      // re-refresh canvas with selected\n      // work in canvas only for now\n      if (settings.selected !== selected && elements[0].getContext) {\n        settings.selected = selected;\n        const ctx = elements[0].getContext('2d');\n        // draw background\n        ctx.fillStyle = settings.backgroundColor;\n        ctx.clearRect(0, 0, elements[0].width, elements[0].height);\n        ctx.fillRect(0, 0, elements[0].width, elements[0].height);\n\n        // draw text\n        for (let i = 0; i < interactionItems.length; i++) {\n          const find = interactionItems[i];\n          drawText(\n            find.gx,\n            find.gy,\n            find.info,\n            find.word,\n            find.weight,\n            find.distance,\n            find.theta,\n            find.rotateDeg,\n            find.attributes,\n            find.id,\n            true\n          );\n        }\n      }\n      return;\n    }\n    // For dimensions, clearCanvas etc.,\n    // we only care about the first element.\n    var canvas = elements[0];\n\n    if (canvas.getContext) {\n      ngx = Math.ceil(canvas.width / g);\n      ngy = Math.ceil(canvas.height / g);\n    } else {\n      var rect = canvas.getBoundingClientRect();\n      ngx = Math.ceil(rect.width / g);\n      ngy = Math.ceil(rect.height / g);\n    }\n\n    // Sending a wordcloudstart event which cause the previous loop to stop.\n    // Do nothing if the event is canceled.\n    if (!sendEvent('wordcloudstart', true)) {\n      return;\n    }\n\n    // Determine the center of the word cloud\n    center = settings.origin ? [settings.origin[0] / g, settings.origin[1] / g] : [ngx / 2, ngy / (isCardioid ? 4 : 2)];\n\n    // Maxium radius to look for space\n    maxRadius = Math.floor(Math.sqrt(ngx * ngx + ngy * ngy));\n\n    /* Clear the canvas only if the clearCanvas is set,\n       if not, update the grid to the current canvas state */\n    grid = [];\n\n    var gx, gy, i;\n    if (!canvas.getContext || settings.clearCanvas) {\n      elements.forEach(function (el) {\n        if (el.getContext) {\n          var ctx = el.getContext('2d');\n          ctx.fillStyle = settings.backgroundColor;\n          ctx.clearRect(0, 0, ngx * (g + 1), ngy * (g + 1));\n          ctx.fillRect(0, 0, ngx * (g + 1), ngy * (g + 1));\n        } else {\n          el.textContent = '';\n          el.style.backgroundColor = settings.backgroundColor;\n          el.style.position = 'relative';\n        }\n      });\n\n      /* fill the grid with empty state */\n      gx = ngx;\n      while (gx--) {\n        grid[gx] = [];\n        gy = ngy;\n        while (gy--) {\n          grid[gx][gy] = true;\n        }\n      }\n    } else {\n      /* Determine bgPixel by creating\n         another canvas and fill the specified background color. */\n      var bctx = document.createElement('canvas').getContext('2d');\n\n      bctx.fillStyle = settings.backgroundColor;\n      bctx.fillRect(0, 0, 1, 1);\n      var bgPixel = bctx.getImageData(0, 0, 1, 1).data;\n\n      /* Read back the pixels of the canvas we got to tell which part of the\n         canvas is empty.\n         (no clearCanvas only works with a canvas, not divs) */\n      var imageData = canvas.getContext('2d').getImageData(0, 0, ngx * g, ngy * g).data;\n\n      gx = ngx;\n      var x, y;\n      while (gx--) {\n        grid[gx] = [];\n        gy = ngy;\n        while (gy--) {\n          y = g;\n          singleGridLoop: while (y--) {\n            x = g;\n            while (x--) {\n              i = 4;\n              while (i--) {\n                if (imageData[((gy * g + y) * ngx * g + (gx * g + x)) * 4 + i] !== bgPixel[i]) {\n                  grid[gx][gy] = false;\n                  break singleGridLoop;\n                }\n              }\n            }\n          }\n          if (grid[gx][gy] !== false) {\n            grid[gx][gy] = true;\n          }\n        }\n      }\n\n      imageData = bctx = bgPixel = undefined;\n    }\n\n    // fill the infoGrid with empty state if we need it\n    if (settings.onWordCloudHover || settings.onWordCloudClick) {\n      interactive = true;\n\n      /* fill the grid with empty state */\n      gx = ngx + 1;\n      while (gx--) {\n        infoGrid[gx] = [];\n      }\n\n      if (settings.onWordCloudHover) {\n        canvas.addEventListener('mousemove', wordcloudhover);\n      }\n\n      if (settings.onWordCloudClick) {\n        canvas.addEventListener('click', wordcloudclick);\n        canvas.addEventListener('touchstart', wordcloudclick);\n        canvas.addEventListener('touchend', function (e) {\n          e.preventDefault();\n        });\n        canvas.style.webkitTapHighlightColor = 'rgba(0, 0, 0, 0)';\n      }\n\n      canvas.addEventListener('wordcloudstart', function stopInteraction() {\n        canvas.removeEventListener('wordcloudstart', stopInteraction);\n\n        canvas.removeEventListener('mousemove', wordcloudhover);\n        canvas.removeEventListener('click', wordcloudclick);\n        hovered = undefined;\n      });\n    }\n\n    if (!settings.animatable) {\n      for (let i = 0; i < settings.data.length; i++) {\n        putWord(settings.data[i]);\n      }\n    } else {\n      i = 0;\n      var loopingFunction, stoppingFunction;\n      if (settings.wait !== 0) {\n        loopingFunction = window.setTimeout;\n        stoppingFunction = window.clearTimeout;\n      } else {\n        loopingFunction = window.setImmediate;\n        stoppingFunction = window.clearImmediate;\n      }\n\n      var addEventListener = function addEventListener(type, listener) {\n        elements.forEach(function (el) {\n          el.addEventListener(type, listener);\n        }, this);\n      };\n\n      var removeEventListener = function removeEventListener(type, listener) {\n        elements.forEach(function (el) {\n          el.removeEventListener(type, listener);\n        }, this);\n      };\n\n      var anotherWordCloudStart = function anotherWordCloudStart() {\n        removeEventListener('wordcloudstart', anotherWordCloudStart);\n        stoppingFunction(timer);\n      };\n\n      addEventListener('wordcloudstart', anotherWordCloudStart);\n\n      var timer = loopingFunction(function loop() {\n        if (i >= settings.data.length) {\n          stoppingFunction(timer);\n          sendEvent('wordcloudstop', false);\n          removeEventListener('wordcloudstart', anotherWordCloudStart);\n\n          return;\n        }\n        escapeTime = new Date().getTime();\n        var drawn = putWord(settings.data[i]);\n        var canceled = !sendEvent('wordclouddrawn', true, {\n          item: settings.data[i],\n          drawn: drawn,\n        });\n        if (exceedTime() || canceled) {\n          stoppingFunction(timer);\n          settings.abort();\n          sendEvent('wordcloudabort', false);\n          sendEvent('wordcloudstop', false);\n          removeEventListener('wordcloudstart', anotherWordCloudStart);\n          return;\n        }\n        i++;\n        timer = loopingFunction(loop, settings.wait);\n      }, settings.wait);\n    }\n  };\n\n  // All set, start the drawing\n  start();\n};\n\nWordCloud.isSupported = isSupported;\nWordCloud.minFontSize = minFontSize;\n\nexport default WordCloud;\n"]}
import { __extends } from "tslib";
/**
 * Create By Bruce Too
 * On 2020-02-18
 */
import { isArray } from '@antv/util';
import ColumnLabel from '../../../column/component/label';
import { VALUE_FIELD } from '../../layer';
var WaterfallLabels = /** @class */ (function (_super) {
    __extends(WaterfallLabels, _super);
    function WaterfallLabels(cfg) {
        return _super.call(this, cfg) || this;
    }
    WaterfallLabels.prototype.adjustLabel = function (label, shape) {
        var MARGIN = 2;
        var shapeBox = shape.getBBox();
        var origin = shape.cfg.origin.data;
        var values = origin[VALUE_FIELD];
        var diff = origin[this.plot.options.yField];
        var value = isArray(values) ? values[1] : values;
        var yPos = (shapeBox.minY + shapeBox.maxY) / 2;
        var textBaseline = 'bottom';
        if (diff < 0) {
            yPos = shapeBox.maxY + MARGIN;
            textBaseline = 'top';
        }
        else {
            yPos = shapeBox.minY - MARGIN;
        }
        label.attr('y', yPos);
        label.attr('text', value);
        label.attr('textBaseline', textBaseline);
    };
    return WaterfallLabels;
}(ColumnLabel));
export default WaterfallLabels;
//# sourceMappingURL=waterfall-label.js.map